<html lang="es">

<head>

    <script class="injected-ffc2e83d85">
        (function () {
            'use strict'; function l(a) { var c = 0; return function () { return c < a.length ? { done: !1, value: a[c++] } : { done: !0 } } } function r(a) { var c = typeof Symbol != "undefined" && Symbol.iterator && a[Symbol.iterator]; if (c) return c.call(a); if (typeof a.length == "number") return { next: l(a) }; throw Error(String(a) + " is not an iterable or ArrayLike"); } var t = typeof Object.defineProperties == "function" ? Object.defineProperty : function (a, c, g) { if (a == Array.prototype || a == Object.prototype) return a; a[c] = g.value; return a };
            function u(a) { a = ["object" == typeof globalThis && globalThis, a, "object" == typeof window && window, "object" == typeof self && self, "object" == typeof global && global]; for (var c = 0; c < a.length; ++c) { var g = a[c]; if (g && g.Math == Math) return g } throw Error("Cannot find global object"); } var v = u(this); function x(a, c) { if (c) a: { var g = v; a = a.split("."); for (var h = 0; h < a.length - 1; h++) { var m = a[h]; if (!(m in g)) break a; g = g[m] } a = a[a.length - 1]; h = g[a]; c = c(h); c != h && c != null && t(g, a, { configurable: !0, writable: !0, value: c }) } }
            function y(a) { if (!(a instanceof Object)) throw new TypeError("Iterator result " + a + " is not an object"); } function z() { this.o = !1; this.j = null; this.u = void 0; this.g = 1; this.i = this.l = 0; this.C = this.h = null } function A(a) { if (a.o) throw new TypeError("Generator is already running"); a.o = !0 } z.prototype.v = function (a) { this.u = a }; function B(a, c) { a.h = { K: c, L: !0 }; a.g = a.l || a.i } z.prototype.N = function () { return this.g }; z.prototype.getNextAddress = z.prototype.N; z.prototype.O = function () { return this.u };
            z.prototype.getYieldResult = z.prototype.O; z.prototype.return = function (a) { this.h = { return: a }; this.g = this.i }; z.prototype["return"] = z.prototype.return; z.prototype.P = function (a) { this.h = { B: a }; this.g = this.i }; z.prototype.jumpThroughFinallyBlocks = z.prototype.P; z.prototype.A = function (a, c) { this.g = c; return { value: a } }; z.prototype.yield = z.prototype.A; z.prototype.T = function (a, c) { a = r(a); var g = a.next(); y(g); if (g.done) this.u = g.value, this.g = c; else return this.j = a, this.A(g.value, c) }; z.prototype.yieldAll = z.prototype.T;
            z.prototype.B = function (a) { this.g = a }; z.prototype.jumpTo = z.prototype.B; z.prototype.F = function () { this.g = 0 }; z.prototype.jumpToEnd = z.prototype.F; z.prototype.H = function (a, c) { this.l = a; c != void 0 && (this.i = c) }; z.prototype.setCatchFinallyBlocks = z.prototype.H; z.prototype.S = function (a) { this.l = 0; this.i = a || 0 }; z.prototype.setFinallyBlock = z.prototype.S; z.prototype.G = function (a, c) { this.g = a; this.l = c || 0 }; z.prototype.leaveTryBlock = z.prototype.G; z.prototype.D = function (a) { this.l = a || 0; a = this.h.K; this.h = null; return a };
            z.prototype.enterCatchBlock = z.prototype.D; z.prototype.J = function (a, c, g) { g ? this.C[g] = this.h : this.C = [this.h]; this.l = a || 0; this.i = c || 0 }; z.prototype.enterFinallyBlock = z.prototype.J; z.prototype.R = function (a, c) { c = this.C.splice(c || 0)[0]; (c = this.h = this.h || c) ? c.L ? this.g = this.l || this.i : c.B != void 0 && this.i < c.B ? (this.g = c.B, this.h = null) : this.g = this.i : this.g = a }; z.prototype.leaveFinallyBlock = z.prototype.R; z.prototype.M = function (a) { return new C(a) }; z.prototype.forIn = z.prototype.M;
            function C(a) { this.i = a; this.g = []; for (var c in a) this.g.push(c); this.g.reverse() } C.prototype.h = function () { for (; this.g.length > 0;) { var a = this.g.pop(); if (a in this.i) return a } return null }; C.prototype.getNext = C.prototype.h; function F(a) { this.g = new z; this.h = a } function G(a, c) { A(a.g); var g = a.g.j; if (g) return H(a, "return" in g ? g["return"] : function (h) { return { value: h, done: !0 } }, c, a.g.return); a.g.return(c); return I(a) }
            function H(a, c, g, h) { try { var m = c.call(a.g.j, g); y(m); if (!m.done) return a.g.o = !1, m; var n = m.value } catch (f) { return a.g.j = null, B(a.g, f), I(a) } a.g.j = null; h.call(a.g, n); return I(a) } function I(a) { for (; a.g.g;)try { var c = a.h(a.g); if (c) return a.g.o = !1, { value: c.value, done: !1 } } catch (g) { a.g.u = void 0, B(a.g, g) } a.g.o = !1; if (a.g.h) { c = a.g.h; a.g.h = null; if (c.L) throw c.K; return { value: c.return, done: !0 } } return { value: void 0, done: !0 } }
            function J(a) { this.next = function (c) { A(a.g); a.g.j ? c = H(a, a.g.j.next, c, a.g.v) : (a.g.v(c), c = I(a)); return c }; this.throw = function (c) { A(a.g); a.g.j ? c = H(a, a.g.j["throw"], c, a.g.v) : (B(a.g, c), c = I(a)); return c }; this.return = function (c) { return G(a, c) }; this[Symbol.iterator] = function () { return this } } function K(a) { function c(h) { return a.next(h) } function g(h) { return a.throw(h) } return new Promise(function (h, m) { function n(f) { f.done ? h(f.value) : Promise.resolve(f.value).then(c, g).then(n, m) } n(a.next()) }) }
            x("Symbol", function (a) { function c(n) { if (this instanceof c) throw new TypeError("Symbol is not a constructor"); return new g(h + (n || "") + "_" + m++, n) } function g(n, f) { this.g = n; t(this, "description", { configurable: !0, writable: !0, value: f }) } if (a) return a; g.prototype.toString = function () { return this.g }; var h = "jscomp_symbol_" + (Math.random() * 1E9 >>> 0) + "_", m = 0; return c });
            x("Symbol.iterator", function (a) { if (a) return a; a = Symbol("Symbol.iterator"); t(Array.prototype, a, { configurable: !0, writable: !0, value: function () { return L(l(this)) } }); return a }); function L(a) { a = { next: a }; a[Symbol.iterator] = function () { return this }; return a }
            x("Promise", function (a) {
                function c(f) { this.h = 0; this.i = void 0; this.g = []; this.u = !1; var b = this.j(); try { f(b.resolve, b.reject) } catch (d) { b.reject(d) } } function g() { this.g = null } function h(f) { return f instanceof c ? f : new c(function (b) { b(f) }) } if (a) return a; g.prototype.h = function (f) { if (this.g == null) { this.g = []; var b = this; this.i(function () { b.l() }) } this.g.push(f) }; var m = v.setTimeout; g.prototype.i = function (f) { m(f, 0) }; g.prototype.l = function () {
                    for (; this.g && this.g.length;) {
                        var f = this.g; this.g = []; for (var b = 0; b < f.length; ++b) {
                            var d =
                                f[b]; f[b] = null; try { d() } catch (e) { this.j(e) }
                        }
                    } this.g = null
                }; g.prototype.j = function (f) { this.i(function () { throw f; }) }; c.prototype.j = function () { function f(e) { return function (k) { d || (d = !0, e.call(b, k)) } } var b = this, d = !1; return { resolve: f(this.F), reject: f(this.l) } }; c.prototype.F = function (f) { if (f === this) this.l(new TypeError("A Promise cannot resolve to itself")); else if (f instanceof c) this.H(f); else { a: switch (typeof f) { case "object": var b = f != null; break a; case "function": b = !0; break a; default: b = !1 }b ? this.D(f) : this.o(f) } };
                c.prototype.D = function (f) { var b = void 0; try { b = f.then } catch (d) { this.l(d); return } typeof b == "function" ? this.J(b, f) : this.o(f) }; c.prototype.l = function (f) { this.v(2, f) }; c.prototype.o = function (f) { this.v(1, f) }; c.prototype.v = function (f, b) { if (this.h != 0) throw Error("Cannot settle(" + f + ", " + b + "): Promise already settled in state" + this.h); this.h = f; this.i = b; this.h === 2 && this.G(); this.C() }; c.prototype.G = function () { var f = this; m(function () { if (f.A()) { var b = v.console; typeof b !== "undefined" && b.error(f.i) } }, 1) }; c.prototype.A =
                    function () { if (this.u) return !1; var f = v.CustomEvent, b = v.Event, d = v.dispatchEvent; if (typeof d === "undefined") return !0; typeof f === "function" ? f = new f("unhandledrejection", { cancelable: !0 }) : typeof b === "function" ? f = new b("unhandledrejection", { cancelable: !0 }) : (f = v.document.createEvent("CustomEvent"), f.initCustomEvent("unhandledrejection", !1, !0, f)); f.promise = this; f.reason = this.i; return d(f) }; c.prototype.C = function () { if (this.g != null) { for (var f = 0; f < this.g.length; ++f)n.h(this.g[f]); this.g = null } }; var n = new g; c.prototype.H =
                        function (f) { var b = this.j(); f.I(b.resolve, b.reject) }; c.prototype.J = function (f, b) { var d = this.j(); try { f.call(b, d.resolve, d.reject) } catch (e) { d.reject(e) } }; c.prototype.then = function (f, b) { function d(p, w) { return typeof p == "function" ? function (D) { try { e(p(D)) } catch (E) { k(E) } } : w } var e, k, q = new c(function (p, w) { e = p; k = w }); this.I(d(f, e), d(b, k)); return q }; c.prototype.catch = function (f) { return this.then(void 0, f) }; c.prototype.I = function (f, b) {
                            function d() {
                                switch (e.h) {
                                    case 1: f(e.i); break; case 2: b(e.i); break; default: throw Error("Unexpected state: " +
                                        e.h);
                                }
                            } var e = this; this.g == null ? n.h(d) : this.g.push(d); this.u = !0
                        }; c.resolve = h; c.reject = function (f) { return new c(function (b, d) { d(f) }) }; c.race = function (f) { return new c(function (b, d) { for (var e = r(f), k = e.next(); !k.done; k = e.next())h(k.value).I(b, d) }) }; c.all = function (f) { var b = r(f), d = b.next(); return d.done ? h([]) : new c(function (e, k) { function q(D) { return function (E) { p[D] = E; w--; w == 0 && e(p) } } var p = [], w = 0; do p.push(void 0), w++, h(d.value).I(q(p.length - 1), k), d = b.next(); while (!d.done) }) }; return c
            });
            function M(a, c) { return Object.prototype.hasOwnProperty.call(a, c) } x("Object.is", function (a) { return a ? a : function (c, g) { return c === g ? c !== 0 || 1 / c === 1 / g : c !== c && g !== g } }); x("Array.prototype.includes", function (a) { return a ? a : function (c, g) { var h = this; h instanceof String && (h = String(h)); var m = h.length; g = g || 0; for (g < 0 && (g = Math.max(g + m, 0)); g < m; g++) { var n = h[g]; if (n === c || Object.is(n, c)) return !0 } return !1 } });
            x("String.prototype.includes", function (a) { return a ? a : function (c, g) { if (this == null) throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined"); if (c instanceof RegExp) throw new TypeError("First argument to String.prototype.includes must not be a regular expression"); return this.indexOf(c, g || 0) !== -1 } });
            x("WeakMap", function (a) {
                function c(d) { this.g = (b += Math.random() + 1).toString(); if (d) { d = r(d); for (var e; !(e = d.next()).done;)e = e.value, this.set(e[0], e[1]) } } function g() { } function h(d) { var e = typeof d; return e === "object" && d !== null || e === "function" } function m(d) { if (!M(d, f)) { var e = new g; t(d, f, { value: e }) } } function n(d) { var e = Object[d]; e && (Object[d] = function (k) { if (k instanceof g) return k; Object.isExtensible(k) && m(k); return e(k) }) } if (function () {
                    if (!a || !Object.seal) return !1; try {
                        var d = Object.seal({}), e = Object.seal({}),
                            k = new a([[d, 2], [e, 3]]); if (k.get(d) != 2 || k.get(e) != 3) return !1; k.delete(d); k.set(e, 4); return !k.has(d) && k.get(e) == 4
                    } catch (q) { return !1 }
                }()) return a; var f = "$jscomp_hidden_" + Math.random(); n("freeze"); n("preventExtensions"); n("seal"); var b = 0; c.prototype.set = function (d, e) { if (!h(d)) throw Error("Invalid WeakMap key"); m(d); if (!M(d, f)) throw Error("WeakMap key fail: " + d); d[f][this.g] = e; return this }; c.prototype.get = function (d) { return h(d) && M(d, f) ? d[f][this.g] : void 0 }; c.prototype.has = function (d) {
                    return h(d) && M(d,
                        f) && M(d[f], this.g)
                }; c.prototype.delete = function (d) { return h(d) && M(d, f) && M(d[f], this.g) ? delete d[f][this.g] : !1 }; return c
            });
            x("Map", function (a) {
                function c() { var b = {}; return b.m = b.next = b.head = b } function g(b, d) { var e = b[1]; return L(function () { if (e) { for (; e.head != b[1];)e = e.m; for (; e.next != e.head;)return e = e.next, { done: !1, value: d(e) }; e = null } return { done: !0, value: void 0 } }) } function h(b, d) {
                    var e = d && typeof d; e == "object" || e == "function" ? n.has(d) ? e = n.get(d) : (e = "" + ++f, n.set(d, e)) : e = "p_" + d; var k = b[0][e]; if (k && M(b[0], e)) for (b = 0; b < k.length; b++) { var q = k[b]; if (d !== d && q.key !== q.key || d === q.key) return { id: e, list: k, index: b, entry: q } } return {
                        id: e,
                        list: k, index: -1, entry: void 0
                    }
                } function m(b) { this[0] = {}; this[1] = c(); this.size = 0; if (b) { b = r(b); for (var d; !(d = b.next()).done;)d = d.value, this.set(d[0], d[1]) } } if (function () {
                    if (!a || typeof a != "function" || !a.prototype.entries || typeof Object.seal != "function") return !1; try {
                        var b = Object.seal({ x: 4 }), d = new a(r([[b, "s"]])); if (d.get(b) != "s" || d.size != 1 || d.get({ x: 4 }) || d.set({ x: 4 }, "t") != d || d.size != 2) return !1; var e = d.entries(), k = e.next(); if (k.done || k.value[0] != b || k.value[1] != "s") return !1; k = e.next(); return k.done || k.value[0].x !=
                            4 || k.value[1] != "t" || !e.next().done ? !1 : !0
                    } catch (q) { return !1 }
                }()) return a; var n = new WeakMap; m.prototype.set = function (b, d) { b = b === 0 ? 0 : b; var e = h(this, b); e.list || (e.list = this[0][e.id] = []); e.entry ? e.entry.value = d : (e.entry = { next: this[1], m: this[1].m, head: this[1], key: b, value: d }, e.list.push(e.entry), this[1].m.next = e.entry, this[1].m = e.entry, this.size++); return this }; m.prototype.delete = function (b) {
                    b = h(this, b); return b.entry && b.list ? (b.list.splice(b.index, 1), b.list.length || delete this[0][b.id], b.entry.m.next = b.entry.next,
                        b.entry.next.m = b.entry.m, b.entry.head = null, this.size--, !0) : !1
                }; m.prototype.clear = function () { this[0] = {}; this[1] = this[1].m = c(); this.size = 0 }; m.prototype.has = function (b) { return !!h(this, b).entry }; m.prototype.get = function (b) { return (b = h(this, b).entry) && b.value }; m.prototype.entries = function () { return g(this, function (b) { return [b.key, b.value] }) }; m.prototype.keys = function () { return g(this, function (b) { return b.key }) }; m.prototype.values = function () { return g(this, function (b) { return b.value }) }; m.prototype.forEach =
                    function (b, d) { for (var e = this.entries(), k; !(k = e.next()).done;)k = k.value, b.call(d, k[1], k[0], this) }; m.prototype[Symbol.iterator] = m.prototype.entries; var f = 0; return m
            });
            x("Set", function (a) {
                function c(g) { this.g = new Map; if (g) { g = r(g); for (var h; !(h = g.next()).done;)this.add(h.value) } this.size = this.g.size } if (function () {
                    if (!a || typeof a != "function" || !a.prototype.entries || typeof Object.seal != "function") return !1; try {
                        var g = Object.seal({ x: 4 }), h = new a(r([g])); if (!h.has(g) || h.size != 1 || h.add(g) != h || h.size != 1 || h.add({ x: 4 }) != h || h.size != 2) return !1; var m = h.entries(), n = m.next(); if (n.done || n.value[0] != g || n.value[1] != g) return !1; n = m.next(); return n.done || n.value[0] == g || n.value[0].x != 4 ||
                            n.value[1] != n.value[0] ? !1 : m.next().done
                    } catch (f) { return !1 }
                }()) return a; c.prototype.add = function (g) { g = g === 0 ? 0 : g; this.g.set(g, g); this.size = this.g.size; return this }; c.prototype.delete = function (g) { g = this.g.delete(g); this.size = this.g.size; return g }; c.prototype.clear = function () { this.g.clear(); this.size = 0 }; c.prototype.has = function (g) { return this.g.has(g) }; c.prototype.entries = function () { return this.g.entries() }; c.prototype.values = function () { return this.g.values() }; c.prototype.keys = c.prototype.values; c.prototype[Symbol.iterator] =
                    c.prototype.values; c.prototype.forEach = function (g, h) { var m = this; this.g.forEach(function (n) { return g.call(h, n, n, m) }) }; return c
            }); (function () {
                function a() {
                    return n ? Promise.resolve(n) : f ? f : f = fetch("https://www.gstatic.com/bard-maui/resources/material-design-icon-names.804824289.json").then(function (b) { if (!b.ok) throw Error("HTTP error! status: " + b.status + " fetching https://www.gstatic.com/bard-maui/resources/material-design-icon-names.804824289.json"); return b.json() }).then(function (b) {
                        if (!Array.isArray(b)) throw new TypeError("Fetched icon names from https://www.gstatic.com/bard-maui/resources/material-design-icon-names.804824289.json is not an array.");
                        return n = b
                    }).catch(function (b) { console.error("IconChecker: Failed to load valid icon names from https://www.gstatic.com/bard-maui/resources/material-design-icon-names.804824289.json.", b); f = null; throw b; })
                } function c(b) {
                    var d, e, k, q; return K(new J(new F(function (p) {
                        switch (p.g) {
                            case 1: d = (b.textContent || "").trim(); if (!d || b.classList.contains("js-replaced-missing-icon") && d === "radio_button_unchecked") return p.return(); e = window.getComputedStyle(b); if (e.display === "none" || e.visibility === "hidden") return p.return();
                                p.H(2); return p.A(a(), 4); case 4: k = p.u; p.G(3); break; case 2: return p.D(), console.warn('IconChecker: Skipping check for icon "' + d + '" as valid names could not be loaded.'), p.return(); case 3: (q = k.includes(d)) ? b.classList.contains("js-replaced-missing-icon") && b.classList.remove("js-replaced-missing-icon") : d === "radio_button_unchecked" && b.classList.contains("js-replaced-missing-icon") || (b.textContent = "radio_button_unchecked", b.classList.add("js-replaced-missing-icon")), p.F()
                        }
                    })))
                } function g(b) {
                    b = b === void 0 ?
                        document.body : b; b.querySelectorAll(m).forEach(function (d) { c(d) })
                } function h() {
                    a().catch(function () { }); document.fonts.ready.then(function () {
                        requestAnimationFrame(function () {
                            g(document.body); (new MutationObserver(function (b) {
                                var d = new Set; b = r(b); for (var e = b.next(); !e.done; e = b.next())if (e = e.value, e.type === "childList") e.addedNodes.forEach(function (q) { q.nodeType === Node.ELEMENT_NODE && (q.matches(m) && d.add(q), q.querySelectorAll(m).forEach(function (p) { d.add(p) })) }); else if (e.type === "attributes" && e.attributeName ===
                                    "class") { var k = e.target; e.target.nodeType === Node.ELEMENT_NODE && k.matches(m) && d.add(k) } else e.type === "characterData" && e.target.parentNode && (e = e.target.parentNode, e.nodeType === Node.ELEMENT_NODE && e.matches(m) && d.add(e)); d.size > 0 && setTimeout(function () { d.forEach(function (q) { c(q) }) }, 500)
                            })).observe(document.body, { childList: !0, subtree: !0, attributes: !0, attributeFilter: ["class"], characterData: !0 })
                        })
                    }).catch(function (b) { console.error("IconChecker: Font loading error. Scanning icons anyway.", b); requestAnimationFrame(function () { g(document.body) }) })
                }
                var m = ["material-icons", "material-symbols-outlined", "material-symbols-rounded", "material-symbols-sharp"].map(function (b) { return "." + b }).join(","), n = null, f = null; document.readyState === "loading" ? document.addEventListener("DOMContentLoaded", function () { h() }) : h()
            })();
        }).call(this);


    </script>

    <meta name="surface-hint" content="desktop-responsive" data-hint="injected-ffc2e83d85">


    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Visions From the Noise - Interactive Workflow</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&amp;family=JetBrains+Mono:wght@400;700&amp;display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,1,0"
        rel="stylesheet">
    <style>
        :root {
            --bg-color: #050505;
            --grid-color: rgba(255, 255, 255, 0.03);
            --human-color: #2563eb;
            --ai-color: #06b6d4;
            --file-color: #22c55e;
            --border-phase: rgba(255, 255, 255, 0.1);
        }

        body {
            background-color: var(--bg-color);
            color: #e2e8f0;
            font-family: 'Space Grotesk', sans-serif;
            overflow-x: hidden;
        }

        .mono {
            font-family: 'JetBrains Mono', monospace;
        }

        /* Background Grid */
        .bg-grid {
            background-size: 40px 40px;
            background-image: linear-gradient(to right, var(--grid-color) 1px, transparent 1px),
                linear-gradient(to bottom, var(--grid-color) 1px, transparent 1px);
        }

        /* Node Styles */
        .node-card {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(8px);
            z-index: 10;
        }

        .node-card:hover {
            transform: translateY(-5px) scale(1.02);
            z-index: 20;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
        }

        .node-human {
            background: rgba(30, 58, 138, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.3);
            box-shadow: 0 0 15px rgba(37, 99, 235, 0.1) inset;
        }

        .node-human:hover {
            border-color: var(--human-color);
            box-shadow: 0 0 20px var(--human-color);
        }

        .node-ai {
            background: rgba(21, 94, 117, 0.2);
            border: 1px solid rgba(6, 182, 212, 0.3);
            box-shadow: 0 0 15px rgba(8, 145, 178, 0.1) inset;
        }

        .node-ai:hover {
            border-color: var(--ai-color);
            box-shadow: 0 0 20px var(--ai-color);
        }

        .node-file {
            background: rgba(20, 83, 45, 0.2);
            border: 1px solid rgba(34, 197, 94, 0.3);
            box-shadow: 0 0 15px rgba(22, 163, 74, 0.1) inset;
        }

        .node-file:hover {
            border-color: var(--file-color);
            box-shadow: 0 0 20px var(--file-color);
        }

        /* SVG Paths */
        svg {
            pointer-events: none;
            overflow: visible;
        }

        path {
            fill: none;
            stroke-width: 2;
            stroke-linecap: round;
            transition: opacity 0.3s;
        }

        .connection-line {
            stroke: rgba(255, 255, 255, 0.15);
        }

        .flow-particle {
            fill: white;
            filter: drop-shadow(0 0 4px white);
        }

        /* Animations */
        @keyframes pulse-glow {

            0%,
            100% {
                opacity: 0.5;
            }

            50% {
                opacity: 1;
            }
        }

        .animate-flow {
            animation: flowAnimation 2s linear infinite;
        }

        /* Phase Containers */
        .phase-box {
            border: 1px dashed var(--border-phase);
            background: rgba(255, 255, 255, 0.005);
            border-radius: 12px;
            pointer-events: none;
            /* Let clicks pass through to nodes */
        }

        .phase-label {
            font-family: 'JetBrains Mono', monospace;
            text-transform: uppercase;
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.4);
            letter-spacing: 2px;
            background: var(--bg-color);
            padding: 0 10px;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #000;
        }

        ::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        /* Floating particles background */
        .particle-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            opacity: 0.3;
        }
    </style>
    <style>
        *,
        ::before,
        ::after {
            --tw-border-spacing-x: 0;
            --tw-border-spacing-y: 0;
            --tw-translate-x: 0;
            --tw-translate-y: 0;
            --tw-rotate: 0;
            --tw-skew-x: 0;
            --tw-skew-y: 0;
            --tw-scale-x: 1;
            --tw-scale-y: 1;
            --tw-pan-x: ;
            --tw-pan-y: ;
            --tw-pinch-zoom: ;
            --tw-scroll-snap-strictness: proximity;
            --tw-gradient-from-position: ;
            --tw-gradient-via-position: ;
            --tw-gradient-to-position: ;
            --tw-ordinal: ;
            --tw-slashed-zero: ;
            --tw-numeric-figure: ;
            --tw-numeric-spacing: ;
            --tw-numeric-fraction: ;
            --tw-ring-inset: ;
            --tw-ring-offset-width: 0px;
            --tw-ring-offset-color: #fff;
            --tw-ring-color: rgb(59 130 246 / 0.5);
            --tw-ring-offset-shadow: 0 0 #0000;
            --tw-ring-shadow: 0 0 #0000;
            --tw-shadow: 0 0 #0000;
            --tw-shadow-colored: 0 0 #0000;
            --tw-blur: ;
            --tw-brightness: ;
            --tw-contrast: ;
            --tw-grayscale: ;
            --tw-hue-rotate: ;
            --tw-invert: ;
            --tw-saturate: ;
            --tw-sepia: ;
            --tw-drop-shadow: ;
            --tw-backdrop-blur: ;
            --tw-backdrop-brightness: ;
            --tw-backdrop-contrast: ;
            --tw-backdrop-grayscale: ;
            --tw-backdrop-hue-rotate: ;
            --tw-backdrop-invert: ;
            --tw-backdrop-opacity: ;
            --tw-backdrop-saturate: ;
            --tw-backdrop-sepia: ;
            --tw-contain-size: ;
            --tw-contain-layout: ;
            --tw-contain-paint: ;
            --tw-contain-style:
        }

        ::backdrop {
            --tw-border-spacing-x: 0;
            --tw-border-spacing-y: 0;
            --tw-translate-x: 0;
            --tw-translate-y: 0;
            --tw-rotate: 0;
            --tw-skew-x: 0;
            --tw-skew-y: 0;
            --tw-scale-x: 1;
            --tw-scale-y: 1;
            --tw-pan-x: ;
            --tw-pan-y: ;
            --tw-pinch-zoom: ;
            --tw-scroll-snap-strictness: proximity;
            --tw-gradient-from-position: ;
            --tw-gradient-via-position: ;
            --tw-gradient-to-position: ;
            --tw-ordinal: ;
            --tw-slashed-zero: ;
            --tw-numeric-figure: ;
            --tw-numeric-spacing: ;
            --tw-numeric-fraction: ;
            --tw-ring-inset: ;
            --tw-ring-offset-width: 0px;
            --tw-ring-offset-color: #fff;
            --tw-ring-color: rgb(59 130 246 / 0.5);
            --tw-ring-offset-shadow: 0 0 #0000;
            --tw-ring-shadow: 0 0 #0000;
            --tw-shadow: 0 0 #0000;
            --tw-shadow-colored: 0 0 #0000;
            --tw-blur: ;
            --tw-brightness: ;
            --tw-contrast: ;
            --tw-grayscale: ;
            --tw-hue-rotate: ;
            --tw-invert: ;
            --tw-saturate: ;
            --tw-sepia: ;
            --tw-drop-shadow: ;
            --tw-backdrop-blur: ;
            --tw-backdrop-brightness: ;
            --tw-backdrop-contrast: ;
            --tw-backdrop-grayscale: ;
            --tw-backdrop-hue-rotate: ;
            --tw-backdrop-invert: ;
            --tw-backdrop-opacity: ;
            --tw-backdrop-saturate: ;
            --tw-backdrop-sepia: ;
            --tw-contain-size: ;
            --tw-contain-layout: ;
            --tw-contain-paint: ;
            --tw-contain-style:
        }

        /* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */
        *,
        ::after,
        ::before {
            box-sizing: border-box;
            border-width: 0;
            border-style: solid;
            border-color: #e5e7eb
        }

        ::after,
        ::before {
            --tw-content: ''
        }

        :host,
        html {
            line-height: 1.5;
            -webkit-text-size-adjust: 100%;
            -moz-tab-size: 4;
            tab-size: 4;
            font-family: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
            font-feature-settings: normal;
            font-variation-settings: normal;
            -webkit-tap-highlight-color: transparent
        }

        body {
            margin: 0;
            line-height: inherit
        }

        hr {
            height: 0;
            color: inherit;
            border-top-width: 1px
        }

        abbr:where([title]) {
            -webkit-text-decoration: underline dotted;
            text-decoration: underline dotted
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-size: inherit;
            font-weight: inherit
        }

        a {
            color: inherit;
            text-decoration: inherit
        }

        b,
        strong {
            font-weight: bolder
        }

        code,
        kbd,
        pre,
        samp {
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            font-feature-settings: normal;
            font-variation-settings: normal;
            font-size: 1em
        }

        small {
            font-size: 80%
        }

        sub,
        sup {
            font-size: 75%;
            line-height: 0;
            position: relative;
            vertical-align: baseline
        }

        sub {
            bottom: -.25em
        }

        sup {
            top: -.5em
        }

        table {
            text-indent: 0;
            border-color: inherit;
            border-collapse: collapse
        }

        button,
        input,
        optgroup,
        select,
        textarea {
            font-family: inherit;
            font-feature-settings: inherit;
            font-variation-settings: inherit;
            font-size: 100%;
            font-weight: inherit;
            line-height: inherit;
            letter-spacing: inherit;
            color: inherit;
            margin: 0;
            padding: 0
        }

        button,
        select {
            text-transform: none
        }

        button,
        input:where([type=button]),
        input:where([type=reset]),
        input:where([type=submit]) {
            -webkit-appearance: button;
            background-color: transparent;
            background-image: none
        }

        :-moz-focusring {
            outline: auto
        }

        :-moz-ui-invalid {
            box-shadow: none
        }

        progress {
            vertical-align: baseline
        }

        ::-webkit-inner-spin-button,
        ::-webkit-outer-spin-button {
            height: auto
        }

        [type=search] {
            -webkit-appearance: textfield;
            outline-offset: -2px
        }

        ::-webkit-search-decoration {
            -webkit-appearance: none
        }

        ::-webkit-file-upload-button {
            -webkit-appearance: button;
            font: inherit
        }

        summary {
            display: list-item
        }

        blockquote,
        dd,
        dl,
        figure,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        hr,
        p,
        pre {
            margin: 0
        }

        fieldset {
            margin: 0;
            padding: 0
        }

        legend {
            padding: 0
        }

        menu,
        ol,
        ul {
            list-style: none;
            margin: 0;
            padding: 0
        }

        dialog {
            padding: 0
        }

        textarea {
            resize: vertical
        }

        input::placeholder,
        textarea::placeholder {
            opacity: 1;
            color: #9ca3af
        }

        [role=button],
        button {
            cursor: pointer
        }

        :disabled {
            cursor: default
        }

        audio,
        canvas,
        embed,
        iframe,
        img,
        object,
        svg,
        video {
            display: block;
            vertical-align: middle
        }

        img,
        video {
            max-width: 100%;
            height: auto
        }

        [hidden]:where(:not([hidden=until-found])) {
            display: none
        }

        .pointer-events-none {
            pointer-events: none
        }

        .pointer-events-auto {
            pointer-events: auto
        }

        .fixed {
            position: fixed
        }

        .absolute {
            position: absolute
        }

        .relative {
            position: relative
        }

        .-top-3 {
            top: -0.75rem
        }

        .bottom-8 {
            bottom: 2rem
        }

        .left-0 {
            left: 0px
        }

        .left-4 {
            left: 1rem
        }

        .right-8 {
            right: 2rem
        }

        .top-0 {
            top: 0px
        }

        .z-0 {
            z-index: 0
        }

        .z-50 {
            z-index: 50
        }

        .mx-auto {
            margin-left: auto;
            margin-right: auto
        }

        .mb-1 {
            margin-bottom: 0.25rem
        }

        .mb-2 {
            margin-bottom: 0.5rem
        }

        .mb-3 {
            margin-bottom: 0.75rem
        }

        .mb-4 {
            margin-bottom: 1rem
        }

        .mt-4 {
            margin-top: 1rem
        }

        .flex {
            display: flex
        }

        .h-1\.5 {
            height: 0.375rem
        }

        .h-3 {
            height: 0.75rem
        }

        .h-\[2200px\] {
            height: 2200px
        }

        .h-full {
            height: 100%
        }

        .min-h-screen {
            min-height: 100vh
        }

        .w-1\.5 {
            width: 0.375rem
        }

        .w-3 {
            width: 0.75rem
        }

        .w-80 {
            width: 20rem
        }

        .w-full {
            width: 100%
        }

        .w-48 {
            width: 12rem
        }

        .max-w-\[1600px\] {
            max-width: 1600px
        }

        .translate-y-\[120\%\] {
            --tw-translate-y: 120%;
            transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))
        }

        .transform {
            transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))
        }

        @keyframes pulse {
            50% {
                opacity: .5
            }
        }

        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite
        }

        .cursor-pointer {
            cursor: pointer
        }

        .select-none {
            -webkit-user-select: none;
            user-select: none
        }

        .flex-col {
            flex-direction: column
        }

        .items-start {
            align-items: flex-start
        }

        .items-end {
            align-items: flex-end
        }

        .items-center {
            align-items: center
        }

        .justify-between {
            justify-content: space-between
        }

        .gap-1 {
            gap: 0.25rem
        }

        .gap-2 {
            gap: 0.5rem
        }

        .gap-3 {
            gap: 0.75rem
        }

        .gap-4 {
            gap: 1rem
        }

        .overflow-hidden {
            overflow: hidden
        }

        .rounded {
            border-radius: 0.25rem
        }

        .rounded-full {
            border-radius: 9999px
        }

        .rounded-lg {
            border-radius: 0.5rem
        }

        .rounded-xl {
            border-radius: 0.75rem
        }

        .border {
            border-width: 1px
        }

        .border-b {
            border-bottom-width: 1px
        }

        .border-t {
            border-top-width: 1px
        }

        .border-white\/10 {
            border-color: rgb(255 255 255 / 0.1)
        }

        .border-white\/20 {
            border-color: rgb(255 255 255 / 0.2)
        }

        .border-zinc-700 {
            --tw-border-opacity: 1;
            border-color: rgb(63 63 70 / var(--tw-border-opacity, 1))
        }

        .border-zinc-800 {
            --tw-border-opacity: 1;
            border-color: rgb(39 39 42 / var(--tw-border-opacity, 1))
        }

        .bg-black\/80 {
            background-color: rgb(0 0 0 / 0.8)
        }

        .bg-blue-600 {
            --tw-bg-opacity: 1;
            background-color: rgb(37 99 235 / var(--tw-bg-opacity, 1))
        }

        .bg-cyan-500 {
            --tw-bg-opacity: 1;
            background-color: rgb(6 182 212 / var(--tw-bg-opacity, 1))
        }

        .bg-green-500 {
            --tw-bg-opacity: 1;
            background-color: rgb(34 197 94 / var(--tw-bg-opacity, 1))
        }

        .bg-green-600 {
            --tw-bg-opacity: 1;
            background-color: rgb(22 163 74 / var(--tw-bg-opacity, 1))
        }

        .bg-zinc-800 {
            --tw-bg-opacity: 1;
            background-color: rgb(39 39 42 / var(--tw-bg-opacity, 1))
        }

        .bg-zinc-900\/80 {
            background-color: rgb(24 24 27 / 0.8)
        }

        .bg-zinc-900\/90 {
            background-color: rgb(24 24 27 / 0.9)
        }

        .bg-gradient-to-b {
            background-image: linear-gradient(to bottom, var(--tw-gradient-stops))
        }

        .from-black\/90 {
            --tw-gradient-from: rgb(0 0 0 / 0.9) var(--tw-gradient-from-position);
            --tw-gradient-to: rgb(0 0 0 / 0) var(--tw-gradient-to-position);
            --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)
        }

        .to-transparent {
            --tw-gradient-to: transparent var(--tw-gradient-to-position)
        }

        .p-4 {
            padding: 1rem
        }

        .p-6 {
            padding: 1.5rem
        }

        .px-2 {
            padding-left: 0.5rem;
            padding-right: 0.5rem
        }

        .px-4 {
            padding-left: 1rem;
            padding-right: 1rem
        }

        .py-1 {
            padding-top: 0.25rem;
            padding-bottom: 0.25rem
        }

        .py-2 {
            padding-top: 0.5rem;
            padding-bottom: 0.5rem
        }

        .pb-2 {
            padding-bottom: 0.5rem
        }

        .pt-4 {
            padding-top: 1rem
        }

        .text-center {
            text-align: center
        }

        .text-3xl {
            font-size: 1.875rem;
            line-height: 2.25rem
        }

        .text-sm {
            font-size: 0.875rem;
            line-height: 1.25rem
        }

        .text-xl {
            font-size: 1.25rem;
            line-height: 1.75rem
        }

        .text-xs {
            font-size: 0.75rem;
            line-height: 1rem
        }

        .text-2xl {
            font-size: 1.5rem;
            line-height: 2rem
        }

        .text-\[10px\] {
            font-size: 10px
        }

        .font-bold {
            font-weight: 700
        }

        .uppercase {
            text-transform: uppercase
        }

        .leading-relaxed {
            line-height: 1.625
        }

        .leading-tight {
            line-height: 1.25
        }

        .tracking-tighter {
            letter-spacing: -0.05em
        }

        .tracking-wider {
            letter-spacing: 0.05em
        }

        .tracking-widest {
            letter-spacing: 0.1em
        }

        .text-gray-300 {
            --tw-text-opacity: 1;
            color: rgb(209 213 219 / var(--tw-text-opacity, 1))
        }

        .text-gray-400 {
            --tw-text-opacity: 1;
            color: rgb(156 163 175 / var(--tw-text-opacity, 1))
        }

        .text-gray-500 {
            --tw-text-opacity: 1;
            color: rgb(107 114 128 / var(--tw-text-opacity, 1))
        }

        .text-white {
            --tw-text-opacity: 1;
            color: rgb(255 255 255 / var(--tw-text-opacity, 1))
        }

        .text-zinc-400 {
            --tw-text-opacity: 1;
            color: rgb(161 161 170 / var(--tw-text-opacity, 1))
        }

        .text-zinc-500 {
            --tw-text-opacity: 1;
            color: rgb(113 113 122 / var(--tw-text-opacity, 1))
        }

        .text-zinc-600 {
            --tw-text-opacity: 1;
            color: rgb(82 82 91 / var(--tw-text-opacity, 1))
        }

        .opacity-80 {
            opacity: 0.8
        }

        .shadow-2xl {
            --tw-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25);
            --tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);
            box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)
        }

        .shadow-\[0_0_10px_rgba\(22\2c 197\2c 94\2c 0\.8\)\] {
            --tw-shadow: 0 0 10px rgba(22, 197, 94, 0.8);
            --tw-shadow-colored: 0 0 10px var(--tw-shadow-color);
            box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)
        }

        .shadow-\[0_0_10px_rgba\(37\2c 99\2c 235\2c 0\.8\)\] {
            --tw-shadow: 0 0 10px rgba(37, 99, 235, 0.8);
            --tw-shadow-colored: 0 0 10px var(--tw-shadow-color);
            box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)
        }

        .shadow-\[0_0_10px_rgba\(6\2c 182\2c 212\2c 0\.8\)\] {
            --tw-shadow: 0 0 10px rgba(6, 182, 212, 0.8);
            --tw-shadow-colored: 0 0 10px var(--tw-shadow-color);
            box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)
        }

        .shadow-lg {
            --tw-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);
            box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)
        }

        .backdrop-blur {
            --tw-backdrop-blur: blur(8px);
            -webkit-backdrop-filter: var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);
            backdrop-filter: var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)
        }

        .backdrop-blur-md {
            --tw-backdrop-blur: blur(12px);
            -webkit-backdrop-filter: var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);
            backdrop-filter: var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)
        }

        .backdrop-blur-xl {
            --tw-backdrop-blur: blur(24px);
            -webkit-backdrop-filter: var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);
            backdrop-filter: var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)
        }

        .transition-all {
            transition-property: all;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 150ms
        }

        .transition-colors {
            transition-property: color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;
            transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;
            transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 150ms
        }

        .transition-transform {
            transition-property: transform;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 150ms
        }

        .delay-150 {
            transition-delay: 150ms
        }

        .delay-75 {
            transition-delay: 75ms
        }

        .duration-500 {
            transition-duration: 500ms
        }

        .hover\:border-white\/40:hover {
            border-color: rgb(255 255 255 / 0.4)
        }

        .hover\:bg-white\/10:hover {
            background-color: rgb(255 255 255 / 0.1)
        }

        .hover\:text-white:hover {
            --tw-text-opacity: 1;
            color: rgb(255 255 255 / var(--tw-text-opacity, 1))
        }

        .group:hover .group-hover\:scale-110 {
            --tw-scale-x: 1.1;
            --tw-scale-y: 1.1;
            transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))
        }

        .group:hover .group-hover\:scale-125 {
            --tw-scale-x: 1.25;
            --tw-scale-y: 1.25;
            transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))
        }

        .group:hover .group-hover\:text-white {
            --tw-text-opacity: 1;
            color: rgb(255 255 255 / var(--tw-text-opacity, 1))
        }

        @media (min-width: 640px) {
            .sm\:text-base {
                font-size: 1rem;
                line-height: 1.5rem
            }
        }
    </style>
    <style>
        @keyframes flowAnimation {
            to {
                stroke-dashoffset: -210;
            }
        }

        .glow-text {
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        /* Interaction Classes */
        .dimmed {
            opacity: 0.1 !important;
            filter: grayscale(100%);
            transition: all 0.3s ease;
        }

        .highlighted {
            opacity: 1 !important;
            z-index: 50;
            transform: translate(-50%, -50%) scale(1.1) !important;
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.2);
        }

        .connection-highlight {
            stroke: #fff !important;
            stroke-width: 3px !important;
            stroke-dasharray: none !important;
            filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.5));
            opacity: 1 !important;
            z-index: 40;
        }

        /* Final Node Special Styling */
        #node-final_site {
            border-radius: 50%;
            width: 160px;
            height: 160px;
            display: flex;
            justify-content: center;
            flex-direction: column;
            background: radial-gradient(circle at center, rgba(37, 99, 235, 0.3), rgba(0, 0, 0, 0.8));
            border: 2px solid rgba(59, 130, 246, 0.5);
            box-shadow: 0 0 30px rgba(37, 99, 235, 0.3);
            position: absolute;
            /* Findable by JS */
        }

        #node-final_site:hover {
            box-shadow: 0 0 50px rgba(37, 99, 235, 0.6);
            transform: translate(-50%, -50%) scale(1.1);
            cursor: pointer;
        }

        /* Label and Connection Styling */
        .connection-label,
        text,
        rect {
            pointer-events: none;
            z-index: 100 !important;
            /* Attempt to force visual layering */
        }
    </style>
</head>

<body class="bg-grid min-h-screen relative text-sm sm:text-base overflow-hidden">
    <!-- Interactive Canvas Area -->
    <div class="relative w-full h-screen overflow-auto mx-auto select-none mt-20" id="diagram-container">
        <!-- Header / Overlay -->
        <div
            class="fixed top-0 left-0 w-full z-50 p-6 pointer-events-none flex justify-between items-start bg-gradient-to-b from-black/90 to-transparent">
            <div>
                <h1 class="text-3xl font-bold tracking-tighter text-white mb-1 glow-text uppercase"
                    style="text-shadow: 0 0 20px rgba(255,255,255,0.3);">
                    Diagrama de flujo de proceso tcnico creativo
                </h1>
                <p class="text-gray-400 mono text-xs uppercase tracking-widest">VISIONS FROM THE NOISE</p>
            </div>
            <!-- Controls Container -->
            <div class="flex flex-col gap-4 items-end pointer-events-auto">
                <!-- Download Button 
                <button
                    class="bg-zinc-900/80 backdrop-blur border border-white/20 text-white px-4 py-2 rounded-lg hover:bg-white/10 hover:border-white/40 transition-all flex items-center gap-2 text-xs uppercase tracking-wider font-bold shadow-lg group"
                    onclick="downloadPage()">
                    <span
                        class="material-symbols-outlined text-sm group-hover:scale-110 transition-transform">download</span>
                    <span>Descargar Web</span>
                </button>
                -->
                <!-- Legend -->
                <div class="bg-black/80 backdrop-blur-md border border-white/10 p-4 rounded-lg shadow-2xl">
                    <h3
                        class="text-xs font-bold text-gray-500 uppercase mb-3 tracking-widest border-b border-white/10 pb-2">
                        Referencias</h3>
                    <span class="text-xs text-gray-300 group-hover:text-white transition-colors">Clic para resaltar
                        elementos</span>
                    <br></br>
                    <div class="flex flex-col gap-2">
                        <div class="flex items-center gap-3 group cursor-pointer" onclick="highlightType('human')">
                            <div
                                class="w-3 h-3 rounded-full bg-blue-600 shadow-[0_0_10px_rgba(37,99,235,0.8)] group-hover:scale-125 transition-transform">
                            </div>
                            <span class="text-xs text-gray-300 group-hover:text-white transition-colors">Input / Accin
                                Humana</span>
                        </div>
                        <div class="flex items-center gap-3 group cursor-pointer" onclick="highlightType('ai')">
                            <div
                                class="w-3 h-3 rounded-full bg-cyan-500 shadow-[0_0_10px_rgba(6,182,212,0.8)] group-hover:scale-125 transition-transform">
                            </div>
                            <span class="text-xs text-gray-300 group-hover:text-white transition-colors">Proceso de
                                IA</span>
                        </div>
                        <div class="flex items-center gap-3 group cursor-pointer" onclick="highlightType('file')">
                            <div
                                class="w-3 h-3 rounded-full bg-green-600 shadow-[0_0_10px_rgba(22,197,94,0.8)] group-hover:scale-125 transition-transform">
                            </div>
                            <span class="text-xs text-gray-300 group-hover:text-white transition-colors">Archivo
                                Resultante</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Zoom Sizer & Wrapper -->
        <!-- Sizer defines scrollable area and centers content -->
        <div id="zoom-sizer" class="relative mx-auto origin-top-left transition-all duration-300 ease-out">
            <div id="zoom-wrapper" class="w-full h-full origin-top-left">
                <div class="relative w-[1300px] h-[2200px] mx-auto top-20">
                    <!-- SVG Layer for connections -->
                    <svg class="absolute top-0 left-0 w-full h-full z-0" id="connections-layer">
                        <defs>
                            <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="28" refY="3.5" orient="auto">
                                <polygon points="0 0, 10 3.5, 0 7" fill="#555"></polygon>
                            </marker>
                            <filter id="glow-line">
                                <feGaussianBlur stdDeviation="1" result="coloredBlur"></feGaussianBlur>
                                <feMerge>
                                    <feMergeNode in="coloredBlur"></feMergeNode>
                                    <feMergeNode in="SourceGraphic"></feMergeNode>
                                </feMerge>
                            </filter>
                        </defs>
                        <path d="M 600 140 C 600 200, 250 200, 250 260" stroke="#333" stroke-width="1" fill="none"
                            marker-end="url(#arrowhead)"></path>
                        <rect x="357" y="192" width="136" height="12" fill="#050505" rx="2"></rect><text x="425" y="200"
                            fill="#666" font-family="JetBrains Mono" font-size="9" text-anchor="middle"
                            style="background: black;">5 Prompts
                            Conceptuales</text>
                        <path d="M 600 140 C 600 200, 250 200, 250 260" stroke="#3b82f6" stroke-width="2" fill="none"
                            stroke-dasharray="10, 200" stroke-dashoffset="0" class="animate-flow"
                            style="filter: url(&quot;#glow-line&quot;);"></path>
                        <path d="M 600 140 C 600 225, 750 225, 750 310" stroke="#333" stroke-width="1" fill="none"
                            marker-end="url(#arrowhead)"></path>
                        <rect x="634" y="217" width="82" height="12" fill="#050505" rx="2"></rect><text x="675" y="225"
                            fill="#666" font-family="JetBrains Mono" font-size="9" text-anchor="middle"
                            style="background: black;">Prompt
                            Lgico</text>
                        <path d="M 600 140 C 600 225, 750 225, 750 310" stroke="#3b82f6" stroke-width="2" fill="none"
                            stroke-dasharray="10, 200" stroke-dashoffset="0" class="animate-flow"
                            style="filter: url(&quot;#glow-line&quot;);"></path>
                        <path d="M 600 140 C 600 225, 1050 225, 1050 310" stroke="#333" stroke-width="1" fill="none"
                            marker-end="url(#arrowhead)"></path>
                        <rect x="769" y="217" width="112" height="12" fill="#050505" rx="2"></rect><text x="825" y="225"
                            fill="#666" font-family="JetBrains Mono" font-size="9" text-anchor="middle"
                            style="background: black;">Prompt
                            Descriptivo</text>
                        <path d="M 600 140 C 600 225, 1050 225, 1050 310" stroke="#3b82f6" stroke-width="2" fill="none"
                            stroke-dasharray="10, 200" stroke-dashoffset="0" class="animate-flow"
                            style="filter: url(&quot;#glow-line&quot;);"></path>
                        <path d="M 600 140 C 500 240, 400 510, 300 610" stroke="#333" stroke-width="1" fill="none"
                            marker-end="url(#arrowhead)"></path>
                        <rect x="397" y="367" width="106" height="12" fill="#050505" rx="2"></rect><text x="450" y="375"
                            fill="#666" font-family="JetBrains Mono" font-size="9" text-anchor="middle"
                            style="background: black;">Prompt
                            Contextual</text>
                        <path d="M 600 140 C 500 240, 400 510, 300 610" stroke="#3b82f6" stroke-width="2" fill="none"
                            stroke-dasharray="10, 200" stroke-dashoffset="0" class="animate-flow"
                            style="filter: url(&quot;#glow-line&quot;);"></path>
                        <path d="M 250 340 C 250 375, 250 375, 250 410" stroke="#333" stroke-width="1" fill="none"
                            marker-end="url(#arrowhead)"></path>
                        <rect x="230" y="367" width="40" height="12" fill="#050505" rx="2"></rect><text x="250" y="375"
                            fill="#666" font-family="JetBrains Mono" font-size="9" text-anchor="middle"
                            style="background: black;">Genera</text>
                        <path d="M 250 340 C 250 375, 250 375, 250 410" stroke="#06b6d4" stroke-width="2" fill="none"
                            stroke-dasharray="10, 200" stroke-dashoffset="0" class="animate-flow"
                            style="filter: url(&quot;#glow-line&quot;);"></path>
                        <path d="M 250 490 C 250 550, 300 550, 300 610" stroke="#333" stroke-width="1" fill="none"
                            marker-end="url(#arrowhead)"></path>
                        <rect x="237" y="542" width="76" height="12" fill="#050505" rx="2"></rect><text x="275" y="550"
                            fill="#666" font-family="JetBrains Mono" font-size="9" text-anchor="middle"
                            style="background: black;">Input
                            Visual</text>
                        <path d="M 250 490 C 250 550, 300 550, 300 610" stroke="#22c55e" stroke-width="2" fill="none"
                            stroke-dasharray="10, 200" stroke-dashoffset="0" class="animate-flow"
                            style="filter: url(&quot;#glow-line&quot;);"></path>
                        <path d="M 300 690 C 300 725, 300 725, 300 760" stroke="#333" stroke-width="1" fill="none"
                            marker-end="url(#arrowhead)"></path>
                        <rect x="280" y="717" width="40" height="12" fill="#050505" rx="2"></rect><text x="300" y="725"
                            fill="#666" font-family="JetBrains Mono" font-size="9" text-anchor="middle"
                            style="background: black;">Genera</text>
                        <path d="M 300 690 C 300 725, 300 725, 300 760" stroke="#06b6d4" stroke-width="2" fill="none"
                            stroke-dasharray="10, 200" stroke-dashoffset="0" class="animate-flow"
                            style="filter: url(&quot;#glow-line&quot;);"></path>
                        <path d="M 300 840 C 300 875, 450 875, 450 910" stroke="#333" stroke-width="1" fill="none"
                            marker-end="url(#arrowhead)"></path>
                        <rect x="337" y="867" width="76" height="12" fill="#050505" rx="2"></rect><text x="375" y="875"
                            fill="#666" font-family="JetBrains Mono" font-size="9" text-anchor="middle"
                            style="background: black;">Input
                            Visual</text>
                        <path d="M 300 840 C 300 875, 450 875, 450 910" stroke="#22c55e" stroke-width="2" fill="none"
                            stroke-dasharray="10, 200" stroke-dashoffset="0" class="animate-flow"
                            style="filter: url(&quot;#glow-line&quot;);"></path>
                        <path d="M 450 990 C 450 1050, 450 1050, 450 1110" stroke="#333" stroke-width="1" fill="none"
                            marker-end="url(#arrowhead)"></path>
                        <rect x="415" y="1042" width="70" height="12" fill="#050505" rx="2"></rect><text x="450"
                            y="1050" fill="#666" font-family="JetBrains Mono" font-size="9" text-anchor="middle"
                            style="background: black;">Composicin</text>
                        <path d="M 450 990 C 450 1050, 450 1050, 450 1110" stroke="#3b82f6" stroke-width="2" fill="none"
                            stroke-dasharray="10, 200" stroke-dashoffset="0" class="animate-flow"
                            style="filter: url(&quot;#glow-line&quot;);"></path>
                        <path d="M 750 390 C 750 425, 750 425, 750 460" stroke="#333" stroke-width="1" fill="none"
                            marker-end="url(#arrowhead)"></path>
                        <rect x="709" y="417" width="82" height="12" fill="#050505" rx="2"></rect><text x="750" y="425"
                            fill="#666" font-family="JetBrains Mono" font-size="9" text-anchor="middle"
                            style="background: black;">Genera
                            Cdigo</text>
                        <path d="M 750 390 C 750 425, 750 425, 750 460" stroke="#06b6d4" stroke-width="2" fill="none"
                            stroke-dasharray="10, 200" stroke-dashoffset="0" class="animate-flow"
                            style="filter: url(&quot;#glow-line&quot;);"></path>
                        <path d="M 750 540 C 750 575, 900 575, 900 610" stroke="#333" stroke-width="1" fill="none"
                            marker-end="url(#arrowhead)"></path>
                        <rect x="754" y="567" width="142" height="12" fill="#050505" rx="2"></rect><text x="825" y="575"
                            fill="#666" font-family="JetBrains Mono" font-size="9" text-anchor="middle"
                            style="background: black;">Estructura
                            Instrumental</text>
                        <path d="M 750 540 C 750 575, 900 575, 900 610" stroke="#22c55e" stroke-width="2" fill="none"
                            stroke-dasharray="10, 200" stroke-dashoffset="0" class="animate-flow"
                            style="filter: url(&quot;#glow-line&quot;);"></path>
                        <path d="M 1050 390 C 1050 425, 1050 425, 1050 460" stroke="#333" stroke-width="1" fill="none"
                            marker-end="url(#arrowhead)"></path>
                        <rect x="1018" y="417" width="64" height="12" fill="#050505" rx="2"></rect><text x="1050"
                            y="425" fill="#666" font-family="JetBrains Mono" font-size="9" text-anchor="middle"
                            style="background: black;">Genera SFX</text>
                        <path d="M 1050 390 C 1050 425, 1050 425, 1050 460" stroke="#06b6d4" stroke-width="2"
                            fill="none" stroke-dasharray="10, 200" stroke-dashoffset="0" class="animate-flow"
                            style="filter: url(&quot;#glow-line&quot;);"></path>
                        <path d="M 1050 540 C 1050 575, 900 575, 900 610" stroke="#333" stroke-width="1" fill="none"
                            marker-end="url(#arrowhead)"></path>
                        <rect x="949" y="567" width="52" height="12" fill="#050505" rx="2"></rect><text x="975" y="575"
                            fill="#666" font-family="JetBrains Mono" font-size="9" text-anchor="middle"
                            style="background: black;">Ambiente</text>
                        <path d="M 1050 540 C 1050 575, 900 575, 900 610" stroke="#22c55e" stroke-width="2" fill="none"
                            stroke-dasharray="10, 200" stroke-dashoffset="0" class="animate-flow"
                            style="filter: url(&quot;#glow-line&quot;);"></path>
                        <path d="M 900 690 C 900 725, 900 725, 900 760" stroke="#333" stroke-width="1" fill="none"
                            marker-end="url(#arrowhead)"></path>
                        <rect x="865" y="717" width="70" height="12" fill="#050505" rx="2"></rect><text x="900" y="725"
                            fill="#666" font-family="JetBrains Mono" font-size="9" text-anchor="middle"
                            style="background: black;">Composicin</text>
                        <path d="M 900 690 C 900 725, 900 725, 900 760" stroke="#3b82f6" stroke-width="2" fill="none"
                            stroke-dasharray="10, 200" stroke-dashoffset="0" class="animate-flow"
                            style="filter: url(&quot;#glow-line&quot;);"></path>
                        <path d="M 900 840 C 900 875, 450 875, 450 910" stroke="#333" stroke-width="1" fill="none"
                            marker-end="url(#arrowhead)"></path>
                        <rect x="637" y="867" width="76" height="12" fill="#050505" rx="2"></rect><text x="675" y="875"
                            fill="#666" font-family="JetBrains Mono" font-size="9" text-anchor="middle"
                            style="background: black;">Input
                            Sonoro</text>
                        <path d="M 900 840 C 900 875, 450 875, 450 910" stroke="#22c55e" stroke-width="2" fill="none"
                            stroke-dasharray="10, 200" stroke-dashoffset="0" class="animate-flow"
                            style="filter: url(&quot;#glow-line&quot;);"></path>
                        <path d="M 300 1340 C 300 1375, 300 1375, 300 1410" stroke="#333" stroke-width="1" fill="none"
                            marker-end="url(#arrowhead)"></path>
                        <rect x="271" y="1367" width="58" height="12" fill="#050505" rx="2"></rect><text x="300"
                            y="1375" fill="#666" font-family="JetBrains Mono" font-size="9" text-anchor="middle"
                            style="background: black;">Input PDF</text>
                        <path d="M 300 1340 C 300 1375, 300 1375, 300 1410" stroke="#3b82f6" stroke-width="2"
                            fill="none" stroke-dasharray="10, 200" stroke-dashoffset="0" class="animate-flow"
                            style="filter: url(&quot;#glow-line&quot;);"></path>
                        <path d="M 250 490 C -50 690, 500 1410, 600 1610" stroke="#333" stroke-width="1" fill="none"
                            marker-end="url(#arrowhead)"></path>
                        <rect x="331" y="1042" width="88" height="12" fill="#050505" rx="2"></rect><text x="375"
                            y="1050" fill="#666" font-family="JetBrains Mono" font-size="9" text-anchor="middle"
                            style="background: black;">Input Esttico</text>
                        <path d="M 250 490 C -50 690, 500 1410, 600 1610" stroke="#22c55e" stroke-width="2" fill="none"
                            stroke-dasharray="10, 200" stroke-dashoffset="0" class="animate-flow"
                            style="filter: url(&quot;#glow-line&quot;);"></path>
                        <path d="M 450 1190 C 450 1400, 600 1400, 600 1610" stroke="#333" stroke-width="1" fill="none"
                            marker-end="url(#arrowhead)"></path>
                        <rect x="472" y="1392" width="106" height="12" fill="#050505" rx="2"></rect><text x="525"
                            y="1400" fill="#666" font-family="JetBrains Mono" font-size="9" text-anchor="middle"
                            style="background: black;">Input Audiovisual</text>
                        <path d="M 450 1190 C 450 1400, 600 1400, 600 1610" stroke="#22c55e" stroke-width="2"
                            fill="none" stroke-dasharray="10, 200" stroke-dashoffset="0" class="animate-flow"
                            style="filter: url(&quot;#glow-line&quot;);"></path>
                        <path d="M 900 840 C 1100 1040, 800 1410, 600 1610" stroke="#333" stroke-width="1" fill="none"
                            marker-end="url(#arrowhead)"></path>
                        <rect x="762" y="1500" width="76" height="12" fill="#050505" rx="2"></rect><text x="1000"
                            y="1508" fill="#666" font-family="JetBrains Mono" font-size="9" text-anchor="middle"
                            style="background: black;">Input Sonoro</text>
                        <path d="M 900 840 C 1100 1040, 800 1410, 600 1610" stroke="#22c55e" stroke-width="2"
                            fill="none" stroke-dasharray="10, 200" stroke-dashoffset="0" class="animate-flow"
                            style="filter: url(&quot;#glow-line&quot;);"></path>
                        <path d="M 300 1490 C 300 1550, 600 1550, 600 1610" stroke="#333" stroke-width="1" fill="none"
                            marker-end="url(#arrowhead)"></path>
                        <rect x="412" y="1542" width="76" height="12" fill="#050505" rx="2"></rect><text x="450"
                            y="1550" fill="#666" font-family="JetBrains Mono" font-size="9" text-anchor="middle"
                            style="background: black;">Razonamiento</text>
                        <path d="M 300 1490 C 300 1550, 600 1550, 600 1610" stroke="#06b6d4" stroke-width="2"
                            fill="none" stroke-dasharray="10, 200" stroke-dashoffset="0" class="animate-flow"
                            style="filter: url(&quot;#glow-line&quot;);"></path>
                        <path d="M 600 1690 C 600 1725, 600 1725, 600 1760" stroke="#333" stroke-width="1" fill="none"
                            marker-end="url(#arrowhead)"></path>
                        <rect x="553" y="1717" width="94" height="12" fill="#050505" rx="2"></rect><text x="600"
                            y="1725" fill="#666" font-family="JetBrains Mono" font-size="9" text-anchor="middle"
                            style="background: black;">Cdigo Refinado</text>
                        <path d="M 600 1690 C 600 1725, 600 1725, 600 1760" stroke="#06b6d4" stroke-width="2"
                            fill="none" stroke-dasharray="10, 200" stroke-dashoffset="0" class="animate-flow"
                            style="filter: url(&quot;#glow-line&quot;);"></path>
                        <path d="M 600 1840 C 600 1875, 600 1875, 600 1910" stroke="#333" stroke-width="1" fill="none"
                            marker-end="url(#arrowhead)"></path>
                        <rect x="568" y="1867" width="64" height="12" fill="#050505" rx="2"></rect><text x="600"
                            y="1875" fill="#666" font-family="JetBrains Mono" font-size="9" text-anchor="middle"
                            style="background: black;">Despliegue</text>
                        <path d="M 600 1840 C 600 1875, 600 1875, 600 1910" stroke="#3b82f6" stroke-width="2"
                            fill="none" stroke-dasharray="10, 200" stroke-dashoffset="0" class="animate-flow"
                            style="filter: url(&quot;#glow-line&quot;);"></path>
                    </svg>
                    <!-- Phase Boundaries (Positioned Absolute) -->
                    <!-- Coordinates based on a 100 grid system mapped to pixels -->
                    <!-- FASE 1 -->
                    <div class="phase-box absolute" style="top: 180px; left: 50px; width: 450px; height: 350px;">
                        <div class="absolute -top-3 left-4 phase-label">FASE 1: CONCEPCIN VISUAL</div>
                    </div>
                    <!-- FASE 2 -->
                    <div class="phase-box absolute" style="top: 550px; left: 100px; width: 500px; height: 480px;">
                        <div class="absolute -top-3 left-4 phase-label">FASE 2: ANIMACIN</div>
                    </div>
                    <!-- FASE 3 -->
                    <div class="phase-box absolute" style="top: 250px; left: 620px; width: 600px; height: 650px;">
                        <div class="absolute -top-3 left-4 phase-label">FASE 3: SONORIZACIN</div>
                    </div>
                    <!-- FASE 4 -->
                    <div class="phase-box absolute" style="top: 1070px; left: 170px; width: 700px; height: 1020px;">
                        <div class="absolute -top-3 left-4 phase-label">FASE 4: EXPOSICIN WEB</div>
                    </div>
                    <!-- Nodes Container -->
                    <div id="nodes-layer">
                        <!-- Nodes will be injected here by JS -->
                        <div class="absolute p-4 rounded-xl border w-48 flex flex-col items-center text-center cursor-pointer node-card node-human"
                            id="node-user_root" style="left: 600px; top: 100px; transform: translate(-50%, -50%);">
                            <div class="mb-2">
                                <span class="material-symbols-outlined text-2xl opacity-80">
                                    person
                                </span>
                            </div>
                            <div class="font-bold text-xs uppercase tracking-wider mb-1 text-white">USUARIO</div>
                            <div class="text-[10px] text-gray-400 leading-tight mono">Investigacin, armado conceptual
                            </div>
                        </div>
                        <div class="absolute p-4 rounded-xl border w-48 flex flex-col items-center text-center cursor-pointer node-card node-ai"
                            id="node-ia_comfy" style="left: 250px; top: 300px; transform: translate(-50%, -50%);">
                            <div class="mb-2">
                                <span class="material-symbols-outlined text-2xl opacity-80">
                                    psychology
                                </span>
                            </div>
                            <div class="font-bold text-xs uppercase tracking-wider mb-1 text-white">IA: COMFYUI</div>
                            <div class="text-[10px] text-gray-400 leading-tight mono">Modelo: SDXL | Accin: Txt2Img
                            </div>
                        </div>
                        <div class="absolute p-4 rounded-xl border w-48 flex flex-col items-center text-center cursor-pointer node-card node-file"
                            id="node-img_static" style="left: 250px; top: 450px; transform: translate(-50%, -50%);">
                            <div class="mb-2">
                                <span class="material-symbols-outlined text-2xl opacity-80">
                                    draft
                                </span>
                            </div>
                            <div class="font-bold text-xs uppercase tracking-wider mb-1 text-white">IMGENES ESTTICAS
                            </div>
                            <div class="text-[10px] text-gray-400 leading-tight mono">Assets Base</div>
                        </div>
                        <div class="absolute p-4 rounded-xl border w-48 flex flex-col items-center text-center cursor-pointer node-card node-ai"
                            id="node-ia_gpt" style="left: 750px; top: 350px; transform: translate(-50%, -50%);">
                            <div class="mb-2">
                                <span class="material-symbols-outlined text-2xl opacity-80">
                                    psychology
                                </span>
                            </div>
                            <div class="font-bold text-xs uppercase tracking-wider mb-1 text-white">IA: GPT MIDI MAKER
                            </div>
                            <div class="text-[10px] text-gray-400 leading-tight mono">Accin: Programacin MIDI</div>
                        </div>
                        <div class="absolute p-4 rounded-xl border w-48 flex flex-col items-center text-center cursor-pointer node-card node-ai"
                            id="node-ia_eleven" style="left: 1050px; top: 350px; transform: translate(-50%, -50%);">
                            <div class="mb-2">
                                <span class="material-symbols-outlined text-2xl opacity-80">
                                    psychology
                                </span>
                            </div>
                            <div class="font-bold text-xs uppercase tracking-wider mb-1 text-white">IA: ELEVEN LABS
                            </div>
                            <div class="text-[10px] text-gray-400 leading-tight mono">Accin: Generacin SFX</div>
                        </div>
                        <div class="absolute p-4 rounded-xl border w-48 flex flex-col items-center text-center cursor-pointer node-card node-file"
                            id="node-file_python" style="left: 750px; top: 500px; transform: translate(-50%, -50%);">
                            <div class="mb-2">
                                <span class="material-symbols-outlined text-2xl opacity-80">
                                    draft
                                </span>
                            </div>
                            <div class="font-bold text-xs uppercase tracking-wider mb-1 text-white">ARCHIVO PYTHON/MIDI
                            </div>
                            <div class="text-[10px] text-gray-400 leading-tight mono">Cdigo Musical</div>
                        </div>
                        <div class="absolute p-4 rounded-xl border w-48 flex flex-col items-center text-center cursor-pointer node-card node-file"
                            id="node-file_sfx" style="left: 1050px; top: 500px; transform: translate(-50%, -50%);">
                            <div class="mb-2">
                                <span class="material-symbols-outlined text-2xl opacity-80">
                                    draft
                                </span>
                            </div>
                            <div class="font-bold text-xs uppercase tracking-wider mb-1 text-white">EFECTOS DE SONIDO
                            </div>
                            <div class="text-[10px] text-gray-400 leading-tight mono">Formato WAV</div>
                        </div>
                        <div class="absolute p-4 rounded-xl border w-48 flex flex-col items-center text-center cursor-pointer node-card node-human"
                            id="node-soft_fl" style="left: 900px; top: 650px; transform: translate(-50%, -50%);">
                            <div class="mb-2">
                                <span class="material-symbols-outlined text-2xl opacity-80">
                                    person
                                </span>
                            </div>
                            <div class="font-bold text-xs uppercase tracking-wider mb-1 text-white">SOFTWARE: FL STUDIO
                            </div>
                            <div class="text-[10px] text-gray-400 leading-tight mono">Input: MIDI + SFX + VST</div>
                        </div>
                        <div class="absolute p-4 rounded-xl border w-48 flex flex-col items-center text-center cursor-pointer node-card node-file"
                            id="node-file_master" style="left: 900px; top: 800px; transform: translate(-50%, -50%);">
                            <div class="mb-2">
                                <span class="material-symbols-outlined text-2xl opacity-80">
                                    graphic_eq
                                </span>
                            </div>
                            <div class="font-bold text-xs uppercase tracking-wider mb-1 text-white">MASTER DE AUDIO
                            </div>
                            <div class="text-[10px] text-gray-400 leading-tight mono">Composicin Final</div>
                        </div>
                        <div class="absolute p-4 rounded-xl border w-48 flex flex-col items-center text-center cursor-pointer node-card node-ai"
                            id="node-ia_grok" style="left: 300px; top: 650px; transform: translate(-50%, -50%);">
                            <div class="mb-2">
                                <span class="material-symbols-outlined text-2xl opacity-80">
                                    psychology
                                </span>
                            </div>
                            <div class="font-bold text-xs uppercase tracking-wider mb-1 text-white">IA: GROK/RUNWAY
                            </div>
                            <div class="text-[10px] text-gray-400 leading-tight mono">Accin: Img2Video</div>
                        </div>
                        <div class="absolute p-4 rounded-xl border w-48 flex flex-col items-center text-center cursor-pointer node-card node-file"
                            id="node-file_clips" style="left: 300px; top: 800px; transform: translate(-50%, -50%);">
                            <div class="mb-2">
                                <span class="material-symbols-outlined text-2xl opacity-80">
                                    movie
                                </span>
                            </div>
                            <div class="font-bold text-xs uppercase tracking-wider mb-1 text-white">CLIPS DE VIDEO</div>
                            <div class="text-[10px] text-gray-400 leading-tight mono">Fragmentos MP4</div>
                        </div>
                        <div class="absolute p-4 rounded-xl border w-48 flex flex-col items-center text-center cursor-pointer node-card node-human"
                            id="node-soft_ae" style="left: 450px; top: 950px; transform: translate(-50%, -50%);">
                            <div class="mb-2">
                                <span class="material-symbols-outlined text-2xl opacity-80">
                                    person
                                </span>
                            </div>
                            <div class="font-bold text-xs uppercase tracking-wider mb-1 text-white">AFTER EFFECTS</div>
                            <div class="text-[10px] text-gray-400 leading-tight mono">Edicin y Montaje</div>
                        </div>
                        <div class="absolute p-4 rounded-xl border w-48 flex flex-col items-center text-center cursor-pointer node-card node-file"
                            id="node-file_video" style="left: 450px; top: 1150px; transform: translate(-50%, -50%);">
                            <div class="mb-2">
                                <span class="material-symbols-outlined text-2xl opacity-80">
                                    movie
                                </span>
                            </div>
                            <div class="font-bold text-xs uppercase tracking-wider mb-1 text-white">VIDEO FINAL</div>
                            <div class="text-[10px] text-gray-400 leading-tight mono">Render MP4</div>
                        </div>
                        <div class="absolute p-4 rounded-xl border w-48 flex flex-col items-center text-center cursor-pointer node-card node-human"
                            id="node-soft_docs" style="left: 300px; top: 1300px; transform: translate(-50%, -50%);">
                            <div class="mb-2">
                                <span class="material-symbols-outlined text-2xl opacity-80">
                                    description
                                </span>
                            </div>
                            <div class="font-bold text-xs uppercase tracking-wider mb-1 text-white">GOOGLE DOCS</div>
                            <div class="text-[10px] text-gray-400 leading-tight mono">Bitcora Procesal</div>
                        </div>
                        <div class="absolute p-4 rounded-xl border w-48 flex flex-col items-center text-center cursor-pointer node-card node-ai"
                            id="node-ia_gemini" style="left: 300px; top: 1450px; transform: translate(-50%, -50%);">
                            <div class="mb-2">
                                <span class="material-symbols-outlined text-2xl opacity-80">
                                    psychology
                                </span>
                            </div>
                            <div class="font-bold text-xs uppercase tracking-wider mb-1 text-white">IA: GEMINI</div>
                            <div class="text-[10px] text-gray-400 leading-tight mono">Input: Bitcora | Estructura Web
                            </div>
                        </div>
                        <div class="absolute p-4 rounded-xl border w-48 flex flex-col items-center text-center cursor-pointer node-card node-ai"
                            id="node-ia_gravity" style="left: 600px; top: 1650px; transform: translate(-50%, -50%);">
                            <div class="mb-2">
                                <span class="material-symbols-outlined text-2xl opacity-80">
                                    psychology
                                </span>
                            </div>
                            <div class="font-bold text-xs uppercase tracking-wider mb-1 text-white">GOOGLE ANTIGRAVITY
                            </div>
                            <div class="text-[10px] text-gray-400 leading-tight mono">Vibe Coding / Integracin</div>
                        </div>
                        <div class="absolute p-4 rounded-xl border w-48 flex flex-col items-center text-center cursor-pointer node-card node-human"
                            id="node-soft_github" style="left: 600px; top: 1800px; transform: translate(-50%, -50%);">
                            <div class="mb-2">
                                <span class="material-symbols-outlined text-2xl opacity-80">
                                    terminal
                                </span>
                            </div>
                            <div class="font-bold text-xs uppercase tracking-wider mb-1 text-white">GITHUB PAGES</div>
                            <div class="text-[10px] text-gray-400 leading-tight mono">Hosting y Despliegue</div>
                        </div>
                        <div class="absolute p-4 rounded-xl border w-48 flex flex-col items-center text-center cursor-pointer node-card node-file"
                            id="node-final_site" style="left: 600px; top: 1950px; transform: translate(-50%, -50%);">
                            <div class="mb-2">
                                <span class="material-symbols-outlined text-2xl opacity-80">
                                    public
                                </span>
                            </div>
                            <div class="font-bold text-xs uppercase tracking-wider mb-1 text-white">SITIO WEB
                                INTERACTIVO
                            </div>
                            <div class="text-[10px] text-gray-400 leading-tight mono">Obra: Visions From the Noise</div>
                        </div>
                    </div>
                </div>
                <!-- End Content Wrapper -->
            </div>
            <!-- End Zoom Wrapper -->
        </div>
        <!-- End Zoom Sizer -->
    </div>
    <!-- Detail Panel (Hidden by default) -->
    <div class="fixed bottom-8 right-8 w-80 bg-zinc-900/90 backdrop-blur-xl border border-zinc-700 p-6 rounded-xl transform translate-y-[120%] transition-transform duration-500 z-50 shadow-2xl"
        id="detail-panel">
        <div class="flex items-center justify-between mb-4">
            <span class="text-xs font-bold px-2 py-1 rounded bg-zinc-800 text-zinc-400 uppercase tracking-wider"
                id="detail-type">TYPE</span>
            <!-- Close button removed -->
        </div>
        <h2 class="text-xl font-bold text-white mb-2 leading-tight" id="detail-title">Node Title</h2>
        <p class="text-zinc-400 text-sm leading-relaxed" id="detail-desc">Description of the process...</p>
        <div class="mt-4 pt-4 border-t border-zinc-800 flex justify-between items-center">
            <span class="text-xs text-zinc-600 mono">STATUS: ACTIVE</span>
            <div class="flex gap-1">
                <span class="w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"></span>
                <span class="w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse delay-75"></span>
                <span class="w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse delay-150"></span>
            </div>
        </div>
    </div>

    <!-- Zoom Controls -->
    <div
        class="fixed bottom-8 right-[24rem] z-50 flex items-center gap-1 bg-zinc-900/90 backdrop-blur-xl border border-zinc-700 p-1.5 rounded-lg shadow-2xl">
        <button onclick="handleZoom(-0.1)"
            class="w-8 h-8 flex items-center justify-center rounded hover:bg-white/10 text-zinc-300 hover:text-white transition-colors"
            title="Zoom Out">
            <span class="material-symbols-outlined text-lg">remove</span>
        </button>
        <button onclick="resetZoom()"
            class="px-3 h-8 flex items-center justify-center rounded hover:bg-white/10 text-zinc-300 hover:text-white text-xs font-bold uppercase tracking-wider transition-colors"
            title="Restablecer">
            Restablecer
        </button>
        <button onclick="handleZoom(0.1)"
            class="w-8 h-8 flex items-center justify-center rounded hover:bg-white/10 text-zinc-300 hover:text-white transition-colors"
            title="Zoom In">
            <span class="material-symbols-outlined text-lg">add</span>
        </button>
    </div>
    </div>
    <!-- Background Audio (Optional, implied by context but not auto-played) -->
    <script>
        // Data Structure mirroring the diagram
        const nodes = [
            // ROOT
            { id: 'user_root', type: 'human', label: 'USUARIO', sub: 'Investigacin, armado conceptual', x: 600, y: 100, desc: "El punto de partida. Investigacin conceptual, definicin de esttica y redaccin de prompts iniciales." },

            // FASE 1
            { id: 'ia_comfy', type: 'ai', label: 'IA: COMFYUI', sub: 'Modelo: SDXL | Accin: Txt2Img', x: 250, y: 300, phase: 1, desc: "Generacin de imgenes base utilizando Stable Diffusion XL a travs de ComfyUI para un control nodal preciso." },
            { id: 'img_static', type: 'file', label: 'IMGENES ESTTICAS', sub: 'Assets Base', x: 250, y: 450, phase: 1, desc: "Coleccin de archivos PNG de alta resolucin que servirn como fotogramas clave o referencias de estilo." },

            // FASE 3 (Parallel start)
            { id: 'ia_gpt', type: 'ai', label: 'IA: GPT MIDI MAKER', sub: 'Accin: Programacin MIDI', x: 750, y: 350, phase: 3, desc: "Generacin de scripts en Python para crear estructuras musicales complejas en formato MIDI." },
            { id: 'ia_eleven', type: 'ai', label: 'IA: ELEVEN LABS', sub: 'Accin: Generacin SFX', x: 1050, y: 350, phase: 3, desc: "Sntesis de efectos de sonido orgnicos y voces abstractas para el ambiente sonoro." },
            { id: 'file_python', type: 'file', label: 'ARCHIVO PYTHON/MIDI', sub: 'Cdigo Musical', x: 750, y: 500, phase: 3, desc: "Archivos .py convertidos a secuencias .mid listas para instrumentacin." },
            { id: 'file_sfx', type: 'file', label: 'EFECTOS DE SONIDO', sub: 'Formato WAV', x: 1050, y: 500, phase: 3, desc: "Archivos de audio raw de alta fidelidad." },
            { id: 'soft_fl', type: 'human', label: 'SOFTWARE: FL STUDIO', sub: 'Input: MIDI + SFX + VST', x: 900, y: 650, phase: 3, desc: "Estacin de trabajo de audio digital donde se orquesta la mezcla final, asignando instrumentos a los MIDIs." },
            { id: 'file_master', type: 'file', label: 'MASTER DE AUDIO', sub: 'Composicin Final', x: 900, y: 800, phase: 3, desc: "Track de audio renderizado y masterizado, listo para sincronizacin." },

            // FASE 2 (Depends on Phase 1)
            { id: 'ia_grok', type: 'ai', label: 'IA: GROK/RUNWAY', sub: 'Accin: Img2Video', x: 300, y: 650, phase: 2, desc: "Transformacin de imgenes estticas en clips de video en movimiento, manteniendo coherencia visual." },
            { id: 'file_clips', type: 'file', label: 'CLIPS DE VIDEO', sub: 'Fragmentos MP4', x: 300, y: 800, phase: 2, desc: "Secuencias de video cortas generadas listas para montaje." },
            { id: 'soft_ae', type: 'human', label: 'AFTER EFFECTS', sub: 'Edicin y Montaje', x: 450, y: 950, phase: 2, desc: "Composicin final, correccin de color y sincronizacin de los clips con el Master de Audio." },
            { id: 'file_video', type: 'file', label: 'VIDEO FINAL', sub: 'Render MP4', x: 450, y: 1150, phase: 2, desc: "Obra audiovisual completa renderizada." },

            // FASE 4
            { id: 'soft_docs', type: 'human', label: 'GOOGLE DOCS', sub: 'Bitcora Procesal', x: 300, y: 1300, phase: 4, desc: "Documentacin textual del proceso creativo, fallos y hallazgos." },
            { id: 'ia_gemini', type: 'ai', label: 'IA: GEMINI', sub: 'Input: Bitcora | Estructura Web', x: 300, y: 1450, phase: 4, desc: "Anlisis del PDF de la bitcora para generar la estructura semntica HTML/CSS del sitio." },
            { id: 'ia_gravity', type: 'ai', label: 'GOOGLE ANTIGRAVITY', sub: 'Vibe Coding / Integracin', x: 600, y: 1650, phase: 4, desc: "Asistente de cdigo avanzado para integrar assets pesados y animaciones complejas." },
            { id: 'soft_github', type: 'human', label: 'GITHUB PAGES', sub: 'Hosting y Despliegue', x: 600, y: 1800, phase: 4, desc: "Repositorio y servidor de despliegue para hacer la obra accesible pblicamente." },
            { id: 'final_site', type: 'file', label: 'SITIO WEB INTERACTIVO', sub: 'Obra: Visions From the Noise', x: 600, y: 1980, phase: 4, desc: "El resultado final: una experiencia web inmersiva." }
        ];

        const connections = [
            // From Root
            { from: 'user_root', to: 'ia_comfy', label: '5 Prompts Conceptuales' },
            { from: 'user_root', to: 'ia_gpt', label: 'Prompt Lgico' },
            { from: 'user_root', to: 'ia_eleven', label: 'Prompt Descriptivo' },
            { from: 'user_root', to: 'ia_grok', label: 'Prompt Contextual', curve: 'loose' },

            // Phase 1
            { from: 'ia_comfy', to: 'img_static', label: 'Genera' },

            // Phase 2
            { from: 'img_static', to: 'ia_grok', label: 'Input Visual' },
            { from: 'ia_grok', to: 'file_clips', label: 'Genera' },
            { from: 'file_clips', to: 'soft_ae', label: 'Input Visual' },
            { from: 'soft_ae', to: 'file_video', label: 'Composicin' },

            // Phase 3
            { from: 'ia_gpt', to: 'file_python', label: 'Genera Cdigo' },
            { from: 'file_python', to: 'soft_fl', label: 'Estructura Instrumental' },
            { from: 'ia_eleven', to: 'file_sfx', label: 'Genera SFX' },
            { from: 'file_sfx', to: 'soft_fl', label: 'Ambiente' },
            { from: 'soft_fl', to: 'file_master', label: 'Composicin' },
            { from: 'file_master', to: 'soft_ae', label: 'Input Sonoro' }, // Cross Phase

            // Phase 4
            { from: 'soft_docs', to: 'ia_gemini', label: 'Input PDF' },
            { from: 'img_static', to: 'ia_gravity', label: 'Input Esttico', curve: 'wide-left' }, // Long jump
            { from: 'file_video', to: 'ia_gravity', label: 'Input Audiovisual' },
            { from: 'file_master', to: 'ia_gravity', label: 'Input Sonoro', curve: 'wide-right' }, // Long jump
            { from: 'ia_gemini', to: 'ia_gravity', label: 'Razonamiento' },
            { from: 'ia_gravity', to: 'soft_github', label: 'Cdigo Refinado' },
            { from: 'soft_github', to: 'final_site', label: 'Despliegue' }
        ];

        // Init
        document.addEventListener('DOMContentLoaded', () => {
            renderNodes();
            renderConnections();
        });

        function renderNodes() {
            const container = document.getElementById('nodes-layer');
            container.innerHTML = '';
            nodes.forEach(node => {
                const el = document.createElement('div');
                // Styles based on type
                let typeClass = 'node-human';
                if (node.type === 'ai') typeClass = 'node-ai';
                if (node.type === 'file') typeClass = 'node-file';

                el.className = `absolute p-4 rounded-xl border w-48 flex flex-col items-center text-center cursor-pointer node-card ${typeClass}`;
                el.style.left = `${node.x}px`;
                el.style.top = `${node.y}px`;
                el.style.transform = 'translate(-50%, -50%)'; // Center anchor
                el.id = `node-${node.id}`;

                // Event Listeners for Hover
                el.onmouseenter = () => {
                    handleNodeHover(node.id);
                    // Legend logic: show detail on hover (except final node if needed, but user said "each node")
                    if (node.id !== 'final_site') showDetail(node);
                };
                el.onmouseleave = () => {
                    handleNodeLeave();
                    // Legend logic: hide on leave
                    if (node.id !== 'final_site') closeDetail();
                };

                // Special handling for Final Node
                if (node.id === 'final_site') {
                    el.onclick = () => window.open('https://cocuchaman.github.io/proyecto', '_blank');
                    // Particles removed
                }
                // Removed Click to show detail

                el.innerHTML = `
                    <div class="mb-2">
                        <span class="material-symbols-outlined text-2xl opacity-80">
                            ${getIcon(node.type, node.label)}
                        </span>
                    </div>
                    <div class="font-bold text-xs uppercase tracking-wider mb-1 text-white">${node.label}</div>
                    <div class="text-[10px] text-gray-400 leading-tight mono">${node.sub}</div>
                `;
                container.appendChild(el);
            });
        }

        function getIcon(type, label) {
            if (label.includes('VIDEO') || label.includes('CLIPS')) return 'movie';
            if (label.includes('AUDIO') || label.includes('MASTER') || label.includes('SFX')) return 'graphic_eq';
            if (label.includes('DOCS')) return 'description';
            if (label.includes('GITHUB')) return 'terminal';
            if (label.includes('WEB')) return 'public';
            if (type === 'human') return 'person';
            if (type === 'ai') return 'psychology'; // memory_alt or smart_toy
            if (type === 'file') return 'draft';
            return 'circle';
        }

        function renderConnections() {
            const svg = document.getElementById('connections-layer');
            svg.innerHTML = `
                <defs>
                    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="28" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#555" />
                    </marker>
                    <filter id="glow-line">
                        <feGaussianBlur stdDeviation="1" result="coloredBlur"/>
                        <feMerge>
                            <feMergeNode in="coloredBlur"/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                </defs>
            `;

            // Arrays to separate render order (Paths first, then Labels)
            const pathsToRender = [];
            const labelsToRender = [];

            connections.forEach((conn, index) => {
                const startNode = nodes.find(n => n.id === conn.from);
                const endNode = nodes.find(n => n.id === conn.to);

                if (!startNode || !endNode) return;

                // Bezier Curve Logic
                const startX = startNode.x;
                const startY = startNode.y + 40; // Bottom of node roughly
                const endX = endNode.x;
                const endY = endNode.y - 40; // Top of node roughly

                const distY = endY - startY;
                const distX = endX - startX;

                let c1x, c1y, c2x, c2y;

                // Custom curve logic for complex routing
                if (conn.curve === 'loose') {
                    c1x = startX - 100; c1y = startY + 100;
                    c2x = endX + 100; c2y = endY - 100;
                } else if (conn.curve === 'wide-left') {
                    c1x = startX - 300; c1y = startY + 200;
                    c2x = endX - 100; c2y = endY - 200;
                } else if (conn.curve === 'wide-right') {
                    c1x = startX + 200; c1y = startY + 200;
                    c2x = endX + 200; c2y = endY - 200;
                } else {
                    // Standard S-curve
                    c1x = startX;
                    c1y = startY + distY * 0.5;
                    c2x = endX;
                    c2y = endY - distY * 0.5;
                }

                const pathData = `M ${startX} ${startY} C ${c1x} ${c1y}, ${c2x} ${c2y}, ${endX} ${endY}`;

                // --- 1. PREPARE PATHS ---
                const pathGroup = document.createElementNS("http://www.w3.org/2000/svg", "g");

                // Base Path (static)
                const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
                path.setAttribute("d", pathData);
                path.setAttribute("stroke", "#333");
                path.setAttribute("stroke-width", "1");
                path.setAttribute("fill", "none");
                // Removed arrowhead marker-end

                // Data for hover mapping
                path.setAttribute("data-from", conn.from);
                path.setAttribute("data-to", conn.to);
                pathGroup.appendChild(path);

                // Animated Flow Path
                const flowPath = document.createElementNS("http://www.w3.org/2000/svg", "path");
                flowPath.setAttribute("d", pathData);
                flowPath.setAttribute("stroke", getFlowColor(startNode.type));
                flowPath.setAttribute("stroke-width", "2");
                flowPath.setAttribute("fill", "none");
                flowPath.setAttribute("stroke-dasharray", "10, 200"); // Dots
                flowPath.setAttribute("stroke-dashoffset", "0");
                flowPath.classList.add("animate-flow");
                flowPath.style.filter = "url(#glow-line)";

                // Add data attrs to flow path too for consistency
                flowPath.setAttribute("data-from", conn.from);
                flowPath.setAttribute("data-to", conn.to);
                pathGroup.appendChild(flowPath);

                pathsToRender.push(pathGroup);

                // --- 2. PREPARE LABELS ---
                if (conn.label) {
                    const labelGroup = document.createElementNS("http://www.w3.org/2000/svg", "g");
                    const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
                    text.classList.add("connection-label");

                    // Custom positioning based on label text
                    let t = 0.5;
                    let offsetY = 0;
                    let offsetX = 0;

                    if (conn.label === 'Input Esttico') {
                        t = 0.85; // Move closer to destination
                        offsetY = 15; // Move down
                    }
                    if (conn.label === 'Input Sonoro' && conn.to === 'ia_gravity') {
                        t = 0.85;
                        offsetY = 0;
                    }
                    // NEW fix: Input Visual under Phase 2 title (img_static -> ia_grok)
                    if (conn.label === 'Input Visual' && conn.from === 'img_static') {
                        t = 0.7; // Push it down further along curve
                        offsetY = 10;
                    }
                    // NEW fix: Input Sonoro (Master -> AE) covered by node
                    if (conn.label === 'Input Sonoro' && conn.from === 'file_master') {
                        t = 0.67; // Force center (was 0.5 default but might be distorted by S-curve)
                        // It's a cross phase distinct connection, let's nudge it up a bit if needed
                        offsetY = 0;
                    }
                    if (conn.label === 'Despliegue') {
                        t = 0.3; // Move closer to start to avoid overlap with final node
                    }

                    // Precise Bezier midpoint calculation
                    const point = getCubicBezierPoint(t,
                        { x: startX, y: startY },
                        { x: c1x, y: c1y },
                        { x: c2x, y: c2y },
                        { x: endX, y: endY }
                    );

                    // Apply final offsets
                    const finalX = point.x + offsetX;
                    const finalY = point.y + offsetY;

                    text.setAttribute("x", finalX);
                    text.setAttribute("y", finalY);
                    text.setAttribute("fill", "#666");
                    text.setAttribute("font-family", "JetBrains Mono");
                    text.setAttribute("font-size", "9");
                    text.setAttribute("text-anchor", "middle");
                    // text.setAttribute("style", "background: black;"); // Background handled by rect
                    text.textContent = conn.label;

                    // Background for text (rect)
                    const bbox = { width: conn.label.length * 6, height: 12 }; // approximate
                    const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
                    rect.setAttribute("x", finalX - bbox.width / 2 - 2);
                    rect.setAttribute("y", finalY - 8);
                    rect.setAttribute("width", bbox.width + 4);
                    rect.setAttribute("height", bbox.height);
                    rect.setAttribute("fill", "#050505");
                    rect.setAttribute("rx", "2");

                    // Order matters for Z-index in SVG: append rect then text
                    labelGroup.appendChild(rect);
                    labelGroup.appendChild(text);
                    labelsToRender.push(labelGroup);
                }
            });

            // RENDER PHASE: Paths first, then Labels
            // This guarantees labels are ALWAYS visually on top of lines
            pathsToRender.forEach(p => svg.appendChild(p));
            labelsToRender.forEach(l => svg.appendChild(l));
        }

        function getFlowColor(type) {
            if (type === 'human') return '#3b82f6';
            if (type === 'ai') return '#06b6d4';
            return '#22c55e';
        }

        // Helper for accurate Bezier points
        function getCubicBezierPoint(t, p0, p1, p2, p3) {
            const u = 1 - t;
            const tt = t * t;
            const uu = u * u;
            const uuu = uu * u;
            const ttt = tt * t;

            const x = uuu * p0.x + 3 * uu * t * p1.x + 3 * u * tt * p2.x + ttt * p3.x;
            const y = uuu * p0.y + 3 * uu * t * p1.y + 3 * u * tt * p2.y + ttt * p3.y;

            return { x, y };
        }

        function handleNodeHover(nodeId) {
            // 1. Dimm everything initially
            document.querySelectorAll('.node-card').forEach(el => el.classList.add('dimmed'));
            document.querySelectorAll('path').forEach(el => el.classList.add('dimmed'));

            // 2. Highlight current node (Glow + Scale)
            const current = document.getElementById(`node-${nodeId}`);
            if (current) {
                current.classList.remove('dimmed');
                current.classList.add('highlighted');
            }

            // 3. Highlight connections and set neighbors to visible (but NO glow)
            document.querySelectorAll(`path[data-from="${nodeId}"], path[data-to="${nodeId}"]`).forEach(path => {
                // Highlight Path
                path.classList.remove('dimmed');
                path.classList.add('connection-highlight');

                // Find Neighbor
                const neighborId = path.getAttribute('data-from') === nodeId ? path.getAttribute('data-to') : path.getAttribute('data-from');
                const neighbor = document.getElementById(`node-${neighborId}`);

                // Show neighbor (remove dim) but DO NOT add 'highlighted' (so no glow/scale)
                if (neighbor) {
                    neighbor.classList.remove('dimmed');
                }
            });
        }

        function handleNodeLeave() {
            document.querySelectorAll('.node-card').forEach(el => {
                el.classList.remove('dimmed');
                el.classList.remove('highlighted');
            });
            document.querySelectorAll('path').forEach(el => {
                el.classList.remove('dimmed');
                el.classList.remove('connection-highlight');
            });
        }

        // Particle function removed per request

        // --- Interaction ---

        function showDetail(node) {
            const panel = document.getElementById('detail-panel');
            const title = document.getElementById('detail-title');
            const desc = document.getElementById('detail-desc');
            const typeLabel = document.getElementById('detail-type');

            title.innerText = node.label;
            desc.innerText = node.desc || "Procesando datos...";

            // Set colors based on type
            let colorClass = 'text-blue-400 border-blue-900 bg-blue-900/20';
            if (node.type === 'ai') colorClass = 'text-cyan-400 border-cyan-900 bg-cyan-900/20';
            if (node.type === 'file') colorClass = 'text-green-400 border-green-900 bg-green-900/20';

            typeLabel.className = `text-xs font-bold px-2 py-1 rounded uppercase tracking-wider ${colorClass}`;
            typeLabel.innerText = node.type === 'file' ? 'ARCHIVO' : (node.type === 'ai' ? 'INTELIGENCIA ARTIFICIAL' : 'ACCIN HUMANA');

            panel.classList.remove('translate-y-[120%]');
        }

        function closeDetail() {
            document.getElementById('detail-panel').classList.add('translate-y-[120%]');
        }

        // --- Zoom Logic ---
        let currentZoom = 1;
        const zoomWrapper = document.getElementById('zoom-wrapper');
        const zoomSizer = document.getElementById('zoom-sizer'); // New element
        const BASE_WIDTH = 1300;
        const BASE_HEIGHT = 2200;

        function handleZoom(delta) {
            const container = document.getElementById('diagram-container');
            if (!container) return;

            // 1. Capture Center Focus
            // Calculate where the center of the viewport is relative to the *scrolled contents*
            const contentCenterX = container.scrollLeft + container.clientWidth / 2;
            const contentCenterY = container.scrollTop + container.clientHeight / 2;

            // Normalize as ratio of total content size (sizer dimensions)
            // If current Zoom is small, sizer might be smaller than container, so scroll is 0.
            // But we can approximate using the current Zoom factor.

            const oldZoom = currentZoom;
            currentZoom += delta;
            // Clamp zoom
            currentZoom = Math.max(0.2, Math.min(3, currentZoom));

            const zoomRatio = currentZoom / oldZoom;

            applyZoom();

            // 2. Restore Focus
            // New Center = Old Center * ratio
            // New Scroll = New Center - Half Viewport
            const newScrollLeft = (contentCenterX * zoomRatio) - (container.clientWidth / 2);
            const newScrollTop = (contentCenterY * zoomRatio) - (container.clientHeight / 2);

            container.scrollLeft = newScrollLeft;
            container.scrollTop = newScrollTop;
        }

        function resetZoom() {
            currentZoom = 1;
            applyZoom();
            // Scroll to top
            if (document.getElementById('diagram-container')) {
                document.getElementById('diagram-container').scrollTop = 0;
            }
        }

        function applyZoom() {
            if (zoomWrapper && zoomSizer) {
                // Apply Scale
                zoomWrapper.style.transform = `scale(${currentZoom})`;

                // Update Sizer Dimensions to force parent scrollbars
                // + 100px padding for comfort
                zoomSizer.style.width = `${BASE_WIDTH * currentZoom}px`;
                zoomSizer.style.height = `${BASE_HEIGHT * currentZoom}px`;
            }
        }

        // Initialize Zoom
        // Short delay to ensure DOM is ready if script runs fast
        setTimeout(applyZoom, 50);

        function highlightType(type) {
            // Dim all nodes
            document.querySelectorAll('.node-card').forEach(el => {
                el.style.opacity = '0.3';
                el.style.transform = 'translate(-50%, -50%) scale(1)';
            });

            // Highlight specific type
            const targets = document.querySelectorAll(`.node-${type}`);
            targets.forEach(el => {
                el.style.opacity = '1';
                el.style.transform = 'translate(-50%, -50%) scale(1.1)';
                el.style.zIndex = '50';
            });

            // Reset after 2 seconds
            setTimeout(() => {
                document.querySelectorAll('.node-card').forEach(el => {
                    el.style.opacity = '1';
                    el.style.transform = 'translate(-50%, -50%) scale(1)';
                    el.style.zIndex = '10';
                });
            }, 2000);
        }

        // --- Download Functionality ---
        function downloadPage() {
            // Get the full HTML content
            const htmlContent = document.documentElement.outerHTML;
            const blob = new Blob([htmlContent], { type: 'text/html' });
            const url = window.URL.createObjectURL(blob);

            const a = document.createElement('a');
            a.href = url;
            a.download = 'visions_workflow.html';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }

        // --- Styles for Animation ---
        const styleSheet = document.createElement("style");
        styleSheet.innerText = `
            @keyframes flowAnimation {
                to { stroke-dashoffset: -210; }
            }
            .glow-text { text-shadow: 0 0 10px rgba(255,255,255,0.5); }
        `;
        document.head.appendChild(styleSheet);

    </script>

</body>

</html>